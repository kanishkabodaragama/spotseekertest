{"is_source_file": true, "format": "PHP", "description": "This PHP class 'SalesRepository' implements sales data retrieval methods for events, including detailed ticket, promotion, and addon information, with methods for general and manager-specific sales data.", "external_files": ["App\traits\\CheckManager", "App\\Models\\Event", "App\\Models\\User", "App\\Services\\SalesService", "Illuminate\\Http\\Request", "Illuminate\\Support\facades\\Auth", "Illuminate\\Support\facades\\DB", "Illuminate\\Support\facades\\Log", "App\\Enums\\PaymentStatus"], "external_methods": ["Event::with", "DB::table", "Log::info", "Auth::user", "PaymentStatus::COMPLETE->value", "PaymentStatus::VERIFIED->value", "PaymentStatus::PARTIALLY_VERIFIED->value"], "published": ["getSalesData", "getManagerSalesData"], "classes": [{"name": "SalesRepository", "description": "Repository class for retrieving sales data related to events, including detailed ticket, promotion, and addon information, with support for manager-specific data access."}], "methods": [{"name": "getSalesData", "description": "Retrieves comprehensive sales data for all events, including ticket sales, promotions, and addons, with detailed calculations for tickets and discounts."}, {"name": "getManagerSalesData", "description": "Retrieves sales data for events managed by the current user, including ticket and addon details."}], "calls": ["Event::with", "DB::table", "Log::info", "Auth::user", "checkManager", "pluck", "sum", "where", "whereIn", "whereNotNull", "join", "select", "orderBy", "get"], "search-terms": ["SalesRepository", "getSalesData", "getManagerSalesData", "Event relationships", "promotion calculations", "ticket sales", "addons", "manager-specific sales"], "state": 2, "filename": "app/Repositories/SalesRepository.php", "format-version": 4, "code-base-name": "https://github.com/kanishkabodaragama/spotseekertest.git:main", "knowledge_revision": 219, "git_revision": "113c79228ad261d8e3a3fd4395fe790f78c2319c", "revision_history": [{"219": "113c79228ad261d8e3a3fd4395fe790f78c2319c"}]}