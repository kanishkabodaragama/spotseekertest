{"is_source_file": true, "format": "PHP", "description": "This PHP class defines a queued job 'UploadTicketJob' responsible for generating a PDF ticket, uploading it to S3 storage, updating the corresponding TicketSale record with the PDF URL, and handling errors and retries.", "external_files": ["App/Models/TicketSale.php", "Illuminate/Bus/Queueable.php", "Illuminate/Contracts/Queue/ShouldQueue.php", "Illuminate/Foundation/Bus/Dispatchable.php", "Illuminate/Queue/InteractsWithQueue.php", "Illuminate/Queue/SerializesModels.php", "Illuminate/Support/Facades/Log.php", "Illuminate/Support/Facades/Storage.php", "Barryvdh/Snappy/Facades/SnappyPdf.php"], "external_methods": ["Log::error", "Log::info", "Storage::disk", "Storage::disk('s3')->put", "Storage::disk('s3')->url", "TicketSale::where", "TicketSale->firstOrFail", "TicketSale->save", "SnappyPdf::loadView"], "published": ["UploadTicketJob"], "classes": [{"name": "UploadTicketJob", "description": "A queued job class that generates a PDF ticket, uploads it to S3, and updates the TicketSale record with the PDF URL."}], "methods": [{"name": "backoff", "description": "Returns an array of seconds to wait before retrying the job."}, {"name": "__construct", "description": "Initializes the job with details array."}, {"name": "failed", "description": "Handles job failure by logging the error message."}, {"name": "handle", "description": "Main method that validates details, generates PDF, uploads to S3, updates database, and logs success or errors."}, {"name": "validateDetails", "description": "Checks for required keys in the details array and throws an exception if missing."}], "calls": ["Log::error", "Log::info", "Storage::disk('s3')->put", "Storage::disk('s3')->url", "TicketSale::where", "TicketSale->firstOrFail", "TicketSale->save", "SnappyPdf::loadView"], "search-terms": ["UploadTicketJob", "PDF generation", "S3 upload", "TicketSale", "Laravel queued job", "PDF orderPDF"], "state": 2, "filename": "app/Jobs/UploadTicketJob.php", "format-version": 4, "code-base-name": "https://github.com/kanishkabodaragama/spotseekertest.git:main", "knowledge_revision": 120, "git_revision": "113c79228ad261d8e3a3fd4395fe790f78c2319c", "revision_history": [{"120": "113c79228ad261d8e3a3fd4395fe790f78c2319c"}]}