{"is_source_file": true, "format": "PHP", "description": "This file defines the PaymentRepository class which implements payment-related data operations such as retrieving, creating, updating, and deleting payment gateways. It interacts with models, handles file uploads to S3, manages database transactions, and implements the PaymentService interface.", "external_files": ["App/Models/PaymentGateway.php", "App/Services/PaymentService.php", "App/Traits/WebXPayApi.php", "Illuminate/Database/Eloquent/ModelNotFoundException.php", "Illuminate/Http/Request.php", "Illuminate/Support/Facades/DB.php", "Illuminate/Support/Facades/Log.php", "Illuminate/Support/Facades/Storage.php", "Illuminate/Pagination/LengthAwarePaginator.php"], "external_methods": ["PaymentGateway::paginate", "PaymentGateway::findOrFail", "PaymentGateway::create", "PaymentGateway::doesntHave", "Storage::disk('s3')->putFileAs", "Storage::disk('s3')->url", "DB::beginTransaction", "DB::commit", "DB::rollBack", "Log::debug"], "published": ["PaymentRepository"], "classes": [{"name": "PaymentRepository", "description": "Repository class for managing payment gateway data, including CRUD operations, file uploads, and pagination."}], "methods": [{"name": "proceedToPayment", "description": "Delegates to paymentProceed method, initiating the payment process."}, {"name": "getPaymentGateways", "description": "Retrieves a paginated list of payment gateways with serialization."}, {"name": "getPaymentGateway", "description": "Fetches a specific payment gateway by ID."}, {"name": "addPaymentGateway", "description": "Creates a new payment gateway, handling optional logo upload to S3."}, {"name": "updatePaymentGateway", "description": "Updates an existing payment gateway, including optional logo upload."}, {"name": "deletePaymentGateway", "description": "Deletes a payment gateway if it has no associated events."}], "calls": ["PaymentGateway::paginate", "PaymentGateway::findOrFail", "PaymentGateway::create", "Storage::disk('s3')->putFileAs", "Storage::disk('s3')->url", "DB::beginTransaction", "DB::commit", "DB::rollBack", "Log::debug", "PaymentGateway::doesntHave", "PaymentGateway::save", "PaymentGateway::delete"], "search-terms": ["PaymentRepository", "PaymentGateway CRUD", "S3 file upload", "Laravel pagination", "PaymentService implementation", "Payment gateway management"], "state": 2, "filename": "app/Repositories/PaymentRepository.php", "format-version": 4, "code-base-name": "https://github.com/kanishkabodaragama/spotseekertest.git:main", "knowledge_revision": 217, "git_revision": "113c79228ad261d8e3a3fd4395fe790f78c2319c", "revision_history": [{"217": "113c79228ad261d8e3a3fd4395fe790f78c2319c"}]}